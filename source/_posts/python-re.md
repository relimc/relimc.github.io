---
title: Python 基础：正则表达式与 re 模块
comments: true
date: 2020-08-21 21:26:03
categories: 
- Python
tags:
- 正则表达式
---

## 正则表达式
正则表达式是一种字符串处理技术，可以理解为一种特殊的字符串，该字符串是某种特征的抽象，该字符串可以代表具备某种特征的所有字符串，也就是说，这种单一的特殊的字符串包含了多个字符串。

百度百科的解释是：正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。

简单的理解就是，两个字符串之间进行比较，然后获得我们想要的字符串。
一般情况下，“规则字符串”是程序员定义的，它表达了程序的意图，即我想要什么样的字符串。被拿来比较的文本，一般是用户提供的，如用户输入的邮箱地址。当用户输入的邮箱地址与程序员指定的规则不匹配是，程序就会提示邮箱格式错误。

正则表达式是有规则的字符串，学习正则表达式，其实就是学习它的规则。

<!-- more -->

### 单字符匹配规则

| 符号  | 规则说明                                     | 例子                             |
| ---- | --------------------------------------------| --------------------------------|
| .    | 匹配除了空格外的任意一个字符                     | . 可代表 a                       |
| []   | 匹配 [] 中列举的字符                           | [ab] 代表 a 或者 b 等价于 a \| b  |
| \d   | 匹配数字，也就是0~9,相当于[0-9]                 | \d 可表示 0 ~ 9的任意一个数字      |
| \D   | 匹配非数字，也就是匹配不是数字的字符，相当于[^0-9]  | \D 可代表 A                     |
| \s   | 匹配空白符，也就是空格和\tab                     |                                |
| \S   | 匹配非空白符，也就是 \s 取反                     |                                |
| \w   | 匹配单词字符，相当于 [a-zA-Z0-9_]                |                               |
| \W   | 匹配非单词字符，\w 取反                          |                               |

### 多字符匹配规则

| 符号 | 规则说明 | 例子 |
| ---- | -------- | ---- |
\* | 匹配前一个字符出现 0 次 1 次 或者多次，可有可无，可多可少 | ab* 包含 a 或者 ab 或者 abb 等字符串
\+ | 匹配前一个字符出现 1 次或者多次，必须至少出现 1 次 | ab+ 包含 ab 或者 abb 等字符串
？ | 匹配前一个字符出现 0 次或者 1 次，要么有 1 次，要么没有 | ab? 可代表 a 或者 ab 这两个字符串
{m} | 匹配前一个字符出现 m 次 | ab{3} 表示 abbb 这个字符串
{m,} | 匹配前一个字符至少出现 m 次 | ab{3,} 包含 abbb 或者 abbbb 等字符串
{m,n} | 匹配前一个字符出现 m 到 n 次 | ab{3, 5} 包含 abbb 和 abbbb 和 abbbbb 这三个字符串

### 边界匹配规则

| 符号 | 规则说明                                           | 例子 |
| ---- | -------------------------------------------------- | ---- |
| .    | 匹配除了空格外的任意一个字符                       |      |
| []   | 匹配 [] 中列举的字符                               |      |
| \d   | 匹配数字，也就是0~9,相当于[0-9]                    |      |
| \D   | 匹配非数字，也就是匹配不是数字的字符，相当于[^0-9] |      |
| \s   | 匹配空白符，也就是空格和\tab                       |      |
| \S   | 匹配非空白符，也就是 \s 取反                       |      |
| \w   | 匹配单词字符，相当于 [a-zA-Z0-9_]                  |      |
| \W   | 匹配非单词字符，\w 取反                            |      |

### 分组匹配规则

| 符号 | 规则说明                                           |
| ---- | -------------------------------------------------- |
| .    | 匹配除了空格外的任意一个字符                       |
| []   | 匹配 [] 中列举的字符                               |
| \d   | 匹配数字，也就是0~9,相当于[0-9]                    |
| \D   | 匹配非数字，也就是匹配不是数字的字符，相当于[^0-9] |
| \s   | 匹配空白符，也就是空格和\tab                       |
| \S   | 匹配非空白符，也就是 \s 取反                       |
| \w   | 匹配单词字符，相当于 [a-zA-Z0-9_]                  |
| \W   | 匹配非单词字符，\w 取反                            |

### 贪婪与非贪婪


## re 模块

正则表达式并不是 Python 的语法，它与编程语言无关。正则表达式是一种强大的字符处理技术，我们如果要在 Python 中使用这个技术，要怎么做呢？re 模块就是这两者的桥梁。

re 模块是 Python 对正则表达式的实现，也就是说，通过 re 模块，我们可以使用正则表达式强大的字符串处理能力。re 模块是 Python 和正则表达式之间的桥梁和接口。

re 模块主要提供了以下方法来处理正则表达式。

### re.match
从字符串的第一个字符开始匹配，若首字符已经不符合正则规则，则返回 None;
若字符串从首部开始符合正则规则，则返回一个 Match 对象，该对象包含了符合正则规则的字符串，这个字符串是原字符串的局部或者所有。

``` python
match = re.match(r'abc', 'abc123')
print(match)  # 
match.group()  # 'abc'
```

### re.fullmatch
从字符串的第一个字符开始匹配，若整个字符串都符合正则规则，则返回一个 Match 对象，该对象包含符合正则规则的整个字符串；否则，返回 None;

### re.search
在字符串里查找符合正则规则的子字符串，若存在，则返回一个 Match 对象，该对象包含了符合正则规则的字符串，这个字符串是原字符串的局部或者所有。

### re.sub

### re.subn

### re.split
这是一个根据正则规则切割字符串的方法。

### re.findall

在字符串里查找符合正则规则的子字符串，不同于 re.search 找到一个目标后就返回，此方法是在字符串中找出所有符合正则规则的子字符串。此方法返回一个由子字符串组成的列表。

### re.finditer
在字符串里查找符合正则规则的子字符串，与 re.findall 类似，此方法是在字符串中找出所有符合正则规则的子字符串。与 re.findall 不同的是，它返回一个由 match 对象组成的迭代器。

### re.compile